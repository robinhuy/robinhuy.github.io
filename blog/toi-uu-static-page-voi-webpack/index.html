<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Tá»‘i Æ°u static website vá»›i Webpack | HuyDQ's Blog</title><meta name=keywords content="Webpack"><meta name=description content="Náº¿u báº¡n lÃ  má»™t Web Frontend Developer thÃ¬ cháº¯c sáº½ khÃ´ng xa láº¡ gÃ¬ vá»›i Webpack, má»™t cÃ´ng cá»¥ bundle code máº¡nh máº½. Webpack thÆ°á»ng Ä‘Æ°á»£c tÃ­ch há»£p sáºµn trong cÃ¡c thÆ° viá»‡n nhÆ° React, Angular, Vue, â€¦ vÃ  cÃ³ nhiá»u ngÆ°á»i tháº­m chÃ­ cÃ²n khÃ´ng biáº¿t Ä‘áº¿n sá»± tá»“n táº¡i cÅ©ng nhÆ° tÃ¡c dá»¥ng cá»§a nÃ³ ğŸ˜…
BÃ i viáº¿t nÃ y mÃ¬nh sáº½ hÆ°á»›ng dáº«n cÃ¡c báº¡n cÃ¡ch tá»‘i Æ°u má»™t static website (web tÄ©nh chá»‰ gá»“m HTML CSS JS) báº±ng Webpack."><meta name=author content><link rel=canonical href=https://huydq.dev/blog/toi-uu-static-page-voi-webpack/><link crossorigin=anonymous href=/assets/css/stylesheet.1d3f823d124f9f3fcec0f227cc1b59954e72f08f59907ec81d076933582a33d1.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://huydq.dev/icons/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://huydq.dev/icons/favicon16.png><link rel=icon type=image/png sizes=32x32 href=https://huydq.dev/icons/favicon32.png><link rel=apple-touch-icon href=https://huydq.dev/icons/favicon.png><link rel=mask-icon href=https://huydq.dev/icons/favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-5KF148C0X6"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5KF148C0X6",{anonymize_ip:!1})}</script><meta property="og:title" content="Tá»‘i Æ°u static website vá»›i Webpack"><meta property="og:description" content="Náº¿u báº¡n lÃ  má»™t Web Frontend Developer thÃ¬ cháº¯c sáº½ khÃ´ng xa láº¡ gÃ¬ vá»›i Webpack, má»™t cÃ´ng cá»¥ bundle code máº¡nh máº½. Webpack thÆ°á»ng Ä‘Æ°á»£c tÃ­ch há»£p sáºµn trong cÃ¡c thÆ° viá»‡n nhÆ° React, Angular, Vue, â€¦ vÃ  cÃ³ nhiá»u ngÆ°á»i tháº­m chÃ­ cÃ²n khÃ´ng biáº¿t Ä‘áº¿n sá»± tá»“n táº¡i cÅ©ng nhÆ° tÃ¡c dá»¥ng cá»§a nÃ³ ğŸ˜…
BÃ i viáº¿t nÃ y mÃ¬nh sáº½ hÆ°á»›ng dáº«n cÃ¡c báº¡n cÃ¡ch tá»‘i Æ°u má»™t static website (web tÄ©nh chá»‰ gá»“m HTML CSS JS) báº±ng Webpack."><meta property="og:type" content="article"><meta property="og:url" content="https://huydq.dev/blog/toi-uu-static-page-voi-webpack/"><meta property="og:image" content="https://huydq.dev/icons/thumbnail.jpg"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-06-19T00:00:00+00:00"><meta property="article:modified_time" content="2021-06-19T00:00:00+00:00"><meta property="og:site_name" content="HuyDQ's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://huydq.dev/icons/thumbnail.jpg"><meta name=twitter:title content="Tá»‘i Æ°u static website vá»›i Webpack"><meta name=twitter:description content="Náº¿u báº¡n lÃ  má»™t Web Frontend Developer thÃ¬ cháº¯c sáº½ khÃ´ng xa láº¡ gÃ¬ vá»›i Webpack, má»™t cÃ´ng cá»¥ bundle code máº¡nh máº½. Webpack thÆ°á»ng Ä‘Æ°á»£c tÃ­ch há»£p sáºµn trong cÃ¡c thÆ° viá»‡n nhÆ° React, Angular, Vue, â€¦ vÃ  cÃ³ nhiá»u ngÆ°á»i tháº­m chÃ­ cÃ²n khÃ´ng biáº¿t Ä‘áº¿n sá»± tá»“n táº¡i cÅ©ng nhÆ° tÃ¡c dá»¥ng cá»§a nÃ³ ğŸ˜…
BÃ i viáº¿t nÃ y mÃ¬nh sáº½ hÆ°á»›ng dáº«n cÃ¡c báº¡n cÃ¡ch tá»‘i Æ°u má»™t static website (web tÄ©nh chá»‰ gá»“m HTML CSS JS) báº±ng Webpack."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Tá»‘i Æ°u static website vá»›i Webpack","item":"https://huydq.dev/blog/toi-uu-static-page-voi-webpack/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Tá»‘i Æ°u static website vá»›i Webpack","name":"Tá»‘i Æ°u static website vá»›i Webpack","description":"Náº¿u báº¡n lÃ  má»™t Web Frontend Developer thÃ¬ cháº¯c sáº½ khÃ´ng xa láº¡ gÃ¬ vá»›i Webpack, má»™t cÃ´ng cá»¥ bundle code máº¡nh máº½. Webpack thÆ°á»ng Ä‘Æ°á»£c tÃ­ch há»£p sáºµn trong cÃ¡c thÆ° viá»‡n nhÆ° React, Angular, Vue, â€¦ vÃ  cÃ³ nhiá»u ngÆ°á»i tháº­m chÃ­ cÃ²n khÃ´ng biáº¿t Ä‘áº¿n sá»± tá»“n táº¡i cÅ©ng nhÆ° tÃ¡c dá»¥ng cá»§a nÃ³ ğŸ˜…\nBÃ i viáº¿t nÃ y mÃ¬nh sáº½ hÆ°á»›ng dáº«n cÃ¡c báº¡n cÃ¡ch tá»‘i Æ°u má»™t static website (web tÄ©nh chá»‰ gá»“m HTML CSS JS) báº±ng Webpack.","keywords":["Webpack"],"articleBody":"Náº¿u báº¡n lÃ  má»™t Web Frontend Developer thÃ¬ cháº¯c sáº½ khÃ´ng xa láº¡ gÃ¬ vá»›i Webpack, má»™t cÃ´ng cá»¥ bundle code máº¡nh máº½. Webpack thÆ°á»ng Ä‘Æ°á»£c tÃ­ch há»£p sáºµn trong cÃ¡c thÆ° viá»‡n nhÆ° React, Angular, Vue, â€¦ vÃ  cÃ³ nhiá»u ngÆ°á»i tháº­m chÃ­ cÃ²n khÃ´ng biáº¿t Ä‘áº¿n sá»± tá»“n táº¡i cÅ©ng nhÆ° tÃ¡c dá»¥ng cá»§a nÃ³ ğŸ˜…\nBÃ i viáº¿t nÃ y mÃ¬nh sáº½ hÆ°á»›ng dáº«n cÃ¡c báº¡n cÃ¡ch tá»‘i Æ°u má»™t static website (web tÄ©nh chá»‰ gá»“m HTML CSS JS) báº±ng Webpack. ChÃº Ã½ static web nÃ y thuá»™c dáº¡ng multiple pages chá»© khÃ´ng pháº£i single page, vÃ  cÃ³ thá»ƒ Ã¡p dá»¥ng cho cÃ¡c website Ä‘á»™ng cÃ³ kiáº¿n trÃºc dáº¡ng Monolithic (dÃ¹ng view template engine Ä‘á»ƒ render).\nVÃ­ dá»¥ cáº¥u trÃºc thÆ° má»¥c má»™t static website thÆ°á»ng cÃ³ dáº¡ng nhÆ° sau:\nSau khi cáº¯t HTML CSS tá»« báº£n thiáº¿t káº¿ xong, trÆ°á»›c khi Ä‘áº©y code lÃªn production, chÃºng ta cáº§n thÃªm má»™t bÆ°á»›c tá»‘i Æ°u nhÆ°: Minify (obfuscate) code, nÃ©n áº£nh, Ä‘Ã¡nh version file CSS, JS Ä‘á»ƒ revalidate cache, â€¦\nChÃºng ta cÃ³ thá»ƒ dÃ¹ng cÃ¡c tool nhÆ° Grunt, Gulp, â€¦ CÃ²n trong bÃ i nÃ y mÃ¬nh sáº½ dÃ¹ng Webpack vá»›i nhá»¯ng tÃ­nh nÄƒng Æ°u viá»‡t hÆ¡n, giÃºp láº­p trÃ¬nh viÃªn cÃ³ thá»ƒ lÆ°á»i hÆ¡n.\nCode tham kháº£o sau khi cáº¥u hÃ¬nh xong cÃ¡c báº¡n cÃ³ thá»ƒ xem luÃ´n táº¡i Ä‘Ã¢y (xem xong nhá»› Star Ä‘á»ƒ á»§ng há»™ tÃ¡c giáº£): https://github.com/robinhuy/webpack-static-pages-template.\nGiá» chÃºng ta sáº½ thá»­ cáº¥u hÃ¬nh tá»« Ä‘áº§u Ä‘á»ƒ hiá»ƒu Ä‘Æ°á»£c cÆ¡ báº£n cÃ¡ch Webpack hoáº¡t Ä‘á»™ng vÃ  cÃ³ thá»ƒ tÃ¹y biáº¿n theo tá»«ng trÆ°á»ng há»£p cá»¥ thá»ƒ.\n1. Khá»Ÿi táº¡o project Khá»Ÿi táº¡o project vá»›i lá»‡nh npm init vÃ  nháº­p vÃ o cÃ¡c thÃ´ng sá»‘ nhÆ°: TÃªn project, author, â€¦\nCÃ i webpack vÃ  webpack-cli vá»›i mÃ´i trÆ°á»ng dev:\n1 npm install webpack webpack-cli --save-dev hoáº·c dÃ¹ng yarn:\n1 yarn add webpack webpack-cli --dev Sau khi cÃ i xong chÃºng ta sáº½ tháº¥y cÃ³ file package.json chá»©a cÃ¡c thÃ´ng tin vá» project vá»«a táº¡o.\nSá»­a láº¡i file package.json, bá» pháº§n main Ä‘i vÃ  thÃªm option private vá»›i giÃ¡ trá»‹ lÃ  true. CÃ¡i nÃ y Ä‘á»ƒ trÃ¡nh lá»—i vá» sau khi build production.\n2. Bundle Code Thá»­ nghiá»‡m chá»©c nÄƒng Ä‘áº§u tiÃªn cá»§a Webpack Ä‘Ã³ lÃ  Bundle code, cho phÃ©p chÃºng ta gá»™p cÃ¡c file js láº¡i thÃ nh 1 file (bundle) vÃ  inject vÃ o trong má»™t file HTML.\nÄáº§u tiÃªn táº¡o thÆ° má»¥c src Ä‘á»ƒ chá»©a source code, trong thÆ° má»¥c src táº¡o 1 file lÃ  index.js vá»›i ná»™i dung tÃ¹y Ã½. VÃ­ dá»¥ mÃ¬nh táº¡o file index.js chá»‰ vá»›i 1 dÃ²ng console.log(â€˜index.jsâ€™):\nRá»“i giá» cháº¡y lá»‡nh sau Ä‘á»ƒ bundle code (sá»­ dá»¥ng webpack cÃ i trong project):\n1 npx webpack Sau khi cháº¡y xong lá»‡nh trÃªn thÃ nh cÃ´ng, sáº½ cÃ³ 1 thÆ° má»¥c tá»± Ä‘á»™ng táº¡o ra lÃ  dist vÃ  bÃªn trong cÃ³ 1 file lÃ  main.js. Xem thá»­ ná»™i dung thÃ¬ tháº¥y giá»‘ng há»‡t file index.js mÃ  chÃºng ta vá»«a táº¡o.\nNhÆ° váº­y lÃ  chÃºng ta vá»«a bundle file index.js thÃ nh main.js. NhÆ°ng file index.js Ä‘Æ¡n giáº£n quÃ¡ chÆ°a tháº¥y cÃ³ gÃ¬. MÃ¬nh sáº½ sá»­a láº¡i cho nÃ³ phá»©c táº¡p hÆ¡n má»™t chÃºt báº±ng cÃ¡ch nhÃºng jQuery vÃ o Ä‘á»ƒ sá»­a DOM. Vá»›i cÃ¡c static website thÃ¬ mÃ¬nh tháº¥y dÃ¹ng jQuery váº«n á»•n, khÃ´ng cáº§n thiáº¿t pháº£i cháº¡y theo cÃ¡c trending framework lÃ m gÃ¬.\nÄá»ƒ sá»­ dá»¥ng jQuery chÃºng ta cÃ³ thá»ƒ chÃ¨n link CDN hoáº·c vÃ o trang chá»§ Ä‘á»ƒ down file js vá» rá»“i nhÃºng vÃ o file HTML. Tuy nhiÃªn khi dÃ¹ng webpack chÃºng ta cÃ³ thá»ƒ cÃ i jQuery qua npm vÃ  import vÃ o file js khÃ¡c Ä‘á»ƒ sá»­ dá»¥ng.\nCÃ i jQuery:\n1 npm install jquery hoáº·c\n1 yarn add jquery Sau khi cÃ i xong, jQuery sáº½ Ä‘Æ°á»£c táº£i vÃ o trong thÆ° má»¥c node_modules vÃ  Ä‘Æ°á»£c khai bÃ¡o trong má»¥c dependencies cá»§a file package.json.\nSá»­a láº¡i file index.js nhÆ° sau:\n1 2 3 import $ from \"jquery\"; $(\"body\").html(\"Hello Webpack\"); Giá» Ä‘á»ƒ cho dá»… test, cÃ¡c báº¡n táº¡o thÃªm cho mÃ¬nh 1 file index.html á»Ÿ trong thÆ° má»¥c dist, sau Ä‘Ã³ nhÃºng file main.js vÃ o trong file index.html\nRá»“i cháº¡y láº¡i lá»‡nh build: npx webpack.\nSau khi build thÃ nh cÃ´ng thÃ¬ báº­t file HTML lÃªn cÃ¡c báº¡n sáº½ tháº¥y nÃ³ hiá»ƒn thá»‹ ra mÃ n hÃ¬nh dÃ²ng chá»¯ â€œHello Webpackâ€. NhÆ° váº­y lÃ  chÃºng ta Ä‘Ã£ bundle jQuery + index.js thÃ nh file main.js vÃ  nhÃºng vÃ o file index.html. VÃ  náº¿u báº¡n báº­t file main.js lÃªn xem thÃ¬ sáº½ tháº¥y lÃ  nÃ³ Ä‘Ã£ Ä‘Æ°á»£c minify + obfuscated.\nCÃ¡c báº¡n cÃ³ thá»ƒ thá»­ viáº¿t thÃªm function, import code tá»« nhiá»u file khÃ¡c nhau vÃ  bundle láº¡i thÃ nh má»™t file nhÆ° trÃªn.\n3. Sá»­ dá»¥ng file cáº¥u hÃ¬nh á» vÃ­ dá»¥ trÃªn chÃºng ta cháº¡y webpack vá»›i cáº¥u hÃ¬nh máº·c Ä‘á»‹nh. Äá»ƒ cÃ³ thá»ƒ cáº¥u hÃ¬nh Ä‘Æ°á»£c nhiá»u hÆ¡n, tÃ¹y chá»‰nh dá»… hÆ¡n thÃ¬ chÃºng ta táº¡o thÃªm 1 file cáº¥u hÃ¬nh vÃ  cháº¡y webpack theo cáº¥u hÃ¬nh cá»§a file Ä‘Ã³.\ná» thÆ° má»¥c gá»‘c táº¡o 1 file lÃ  webpack.config.js vá»›i ná»™i dung nhÆ° sau:\n1 2 3 4 5 6 7 8 9 const path = require(\"path\"); module.exports = { entry: \"./src/index.js\", output: { filename: \"main.js\", path: path.resolve(__dirname, \"dist\"), }, }; ÄÃ¢y chÃ­nh lÃ  cáº¥u hÃ¬nh máº·c Ä‘á»‹nh, cháº¡y thá»­ vá»›i lá»‡nh:\n1 npx webpack --config webpack.config.js báº¡n sáº½ tháº¥y káº¿t quáº£ y há»‡t nhÆ° cÅ©.\nBÃ¢y giá» thá»­ sá»­a file config, vÃ­ dá»¥ sá»­a pháº§n output \u003e filename thÃ nh bundle.js,xÃ³a háº¿t file .js trong thÆ° má»¥c dist Ä‘i vÃ  build láº¡i, báº¡n sáº½ tháº¥y sau khi build thÃ¬ file bundle cá»§a chÃºng ta Ä‘Ã£ Ä‘á»•i thÃ nh bundle.js nhÆ° trong file cáº¥u hÃ¬nh.\nFile cáº¥u hÃ¬nh cá»§a webpack chá»‰ Ä‘Æ¡n giáº£n lÃ  export ra má»™t object cÃ³ chá»©a cÃ¡c options mÃ  webpack cung cáº¥p vÃ  giÃ¡ trá»‹ do chÃºng ta thiáº¿t láº­p, options nÃ o khÃ´ng khai bÃ¡o thÃ¬ webpack sáº½ sá»­ dá»¥ng giÃ¡ trá»‹ máº·c Ä‘á»‹nh. VÃ­ dá»¥ má»™t file cáº¥u hÃ¬nh:\n4. Sá»­ dá»¥ng Plugin Sá»­ dá»¥ng plugin Ä‘á»ƒ bá»• sung thÃªm tÃ­nh nÄƒng mong muá»‘n, cÃ³ thá»ƒ dÃ¹ng nhá»¯ng plugin cÃ³ sáºµn hoáº·c tá»± viáº¿t. VÃ­ dá»¥ má»™t sá»‘ Plugin hay dÃ¹ng: HtmlWebpackPlugin, MiniCssExtractPlugin, ImageMinimizerWebpackPlugin, ProvidePlugin.\nVá»›i nhá»¯ng plugin cÃ³ sáºµn trÃªn npm thÃ¬ Ä‘áº§u tiÃªn chÃºng ta cáº§n cÃ i thÆ° viá»‡n trÆ°á»›c:\n1 npm install html-webpack-plugin --save-dev hoáº·c\n1 yarn add html-webpack-plugin --dev Sau khi cÃ i xong thÃ¬ khai bÃ¡o plugin sá»­ dá»¥ng á»Ÿ file config vá»›i options plugins, giÃ¡ trá»‹ cá»§a nÃ³ lÃ  1 máº£ng cÃ¡c plugin. VÃ­ dá»¥ cÃ i plugin html-webpack-plugin Ä‘á»ƒ cho phÃ©p táº¡o file html máº«u vÃ  tÃ¹y chá»‰nh inject script theo cÃ¡ch mÃ¬nh muá»‘n.\n1 2 3 4 5 6 7 8 9 10 11 12 const HtmlWebpackPlugin = require(\"html-webpack-plugin\"); module.exports = { entry: \"index.js\", output: { path: `${__dirname}/dist`, clean: true, }, plugins: [new HtmlWebpackPlugin()], }; BÃ¢y giá» thay vÃ¬ táº¡o sáºµn file html á»Ÿ trong thÆ° má»¥c dist, thÃ¬ chÃºng ta chá»‰ cáº§n cháº¡y lá»‡nh build, webpack sáº½ tá»± táº¡o ra 1 file html vÃ  nhÃºng file bundle vÃ o luÃ´n. ChÃº Ã½ option output clean: true lÃ  Ä‘á»ƒ tá»± Ä‘á»™ng xÃ³a háº¿t cÃ¡c file cÅ© trong thÆ° má»¥c dist trÆ°á»›c khi build.\n5. Cache Busting ThÃ´ng thÆ°á»ng trÃ¬nh duyá»‡t sáº½ tá»± Ä‘á»™ng cache cÃ¡c file tÄ©nh nhÆ° CSS, JS Ä‘á»ƒ tÄƒng performance (trá»« trÆ°á»ng há»£p phÃ­a server cáº¥u hÃ¬nh khÃ´ng cho phÃ©p cache file). Thá»‰nh thoáº£ng báº¡n sáº½ gáº·p trÆ°á»ng há»£p sá»­a file CSS nhÆ°ng ngÆ°á»i dÃ¹ng khÃ´ng tháº¥y cÃ³ gÃ¬ thay Ä‘á»•i. Muá»‘n Ã¡p dá»¥ng style má»›i thÃ¬ pháº£i tá»± clear cache trÃªn trÃ¬nh duyá»‡t (Ã­t ngÆ°á»i dÃ¹ng biáº¿t vÃ  tá»± lÃ m viá»‡c nÃ y).\nVáº­y Ä‘á»ƒ tá»‘i Æ°u performance, váº«n cho phÃ©p cache file vá»›i thá»i gian dÃ i, thÃ¬ chÃºng ta Ã¡p dá»¥ng cache busting. CÃ³ thá»ƒ lÃ  dÃ¹ng query strings hoáº·c Ä‘á»•i tÃªn file Ä‘á»ƒ browser nháº­n biáº¿t lÃ  cÃ³ thay Ä‘á»•i vÃ  táº£i file má»›i vá». Äá»ƒ Ä‘áº£m báº£o chÃ­nh xÃ¡c thÃ¬ mÃ¬nh chá»n cÃ¡ch Ä‘á»•i tÃªn file, má»—i láº§n thay Ä‘á»•i code thÃ¬ chÃºng ta láº¡i Ä‘á»•i tÃªn file Ä‘i Ä‘á»ƒ trÃ¬nh duyá»‡t tá»± táº£i láº¡i.\nThay vÃ¬ lÃ m thá»§ cÃ´ng thÃ¬ chÃºng ta sáº½ cáº¥u hÃ¬nh trong webpack Ä‘á»ƒ webpack tá»± Ä‘á»™ng build file vá»›i tÃªn má»›i vÃ  tá»± Ä‘á»™ng nhÃºng vÃ o file html. Káº¿t há»£p option entry + module vÃ  plugin HtmlWebpackPlugin + MiniCssExtractPlugin, chÃºng ta cÃ³ thá»ƒ bundle ra cÃ¡c file JS, CSS vá»›i tÃªn theo dáº¡ng hash hoáº·c contenthash rá»“i tá»± Ä‘á»™ng nhÃºng vÃ o file html.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 const HtmlWebpackPlugin = require(\"html-webpack-plugin\"); const MiniCssExtractPlugin = require(\"mini-css-extract-plugin\"); module.exports = { entry: { index: { import: \"./src/index.js\", filename: \"index.[contenthash].js\", }, }, output: { path: `${__dirname}/dist`, clean: true, }, plugins: [ new HtmlWebpackPlugin(), new MiniCssExtractPlugin({ filename: \"[name].[contenthash].css\", }), ], module: { rules: [ { test: /.s?css$/, use: [MiniCssExtractPlugin.loader, \"css-loader\"], }, ], }, }; ChÃº Ã½ á»Ÿ trÃªn mÃ¬nh cÃ³ sá»­ dá»¥ng thÃªm thÆ° viá»‡n css-loader Ä‘á»ƒ cho phÃ©p import file CSS.\nTest thá»­ báº±ng cÃ¡ch táº¡o thÃªm 1 file css trong thÆ° má»¥c src, vÃ­ dá»¥ style.css:\n1 2 3 h1 { color: red; } Tiáº¿p Ä‘Ã³ import vÃ o file index.js:\n1 2 3 4 5 import \"./style.css\"; import $ from \"jquery\"; $(\"body\").prepend(\"Hello Webpack\"); Cháº¡y láº¡i lá»‡nh build vÃ  káº¿t quáº£ sáº½ nhÆ° nÃ y:\n6. Multiple pages TÆ°Æ¡ng tá»±, thÃªm 1 chÃºt cáº¥u hÃ¬nh á»Ÿ entry vÃ  HtmlWebpackPlugin, chÃºng ta sáº½ cÃ³ thá»ƒ code nhiá»u file HTML (multiple pages), vÃ  cho phÃ©p inject cÃ¡c script khÃ¡c nhau vÃ o tá»«ng file. VÃ­ dá»¥:\nCáº¥u hÃ¬nh multiple entry cho 2 trang lÃ  index vÃ  about:\n1 2 3 4 5 6 7 8 9 10 entry: { index: { import: \"./src/js/index.js\", filename: \"js/index.[contenthash].js\", }, about: { import: \"./src/js/about.js\", filename: \"js/about.[contenthash].js\", }, }, Cáº¥u hÃ¬nh plugin HtmlWebpackPlugin Ä‘á»ƒ cho phÃ©p sá»­ dá»¥ng file html sáºµn lÃ m template thay vÃ¬ tá»± sinh ra file html:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 plugins: [ new HtmlWebpackPlugin({ template: \"./src/index.html\", inject: \"body\", filename: \"index.html\", }), new HtmlWebpackPlugin({ template: \"./src/about.html\", inject: \"body\", filename: \"about.html\", }), new MiniCssExtractPlugin({ filename: \"css/[name].[contenthash].css\", }), ], Tá»± build láº¡i Ä‘á»ƒ xem káº¿t quáº£!\n7. Cáº¥u hÃ¬nh theo mÃ´i trÆ°á»ng á» trÃªn chÃºng ta Ä‘Ã£ cáº¥u hÃ¬nh Ä‘Æ°á»£c tÆ°Æ¡ng Ä‘á»‘i Ä‘áº§y Ä‘á»§ cÃ¡c chá»©c nÄƒng. NhÆ°ng náº¿u má»—i láº§n code láº¡i pháº£i build láº¡i code Ä‘á»ƒ xem káº¿t quáº£ thÃ¬ ráº¥t máº¥t cÃ´ng, vÃ  khi debug cÅ©ng khÃ³ vÃ¬ code Ä‘Ã£ Ä‘Æ°á»£c minify + obfuscate. VÃ¬ váº­y chÃºng ta sáº½ bá»• sung thÃªm cáº¥u hÃ¬nh cho mÃ´i trÆ°á»ng dev, vÃ  bá»• sung lá»‡nh cháº¡y cho 2 mÃ´i trÆ°á»ng riÃªng biá»‡t.\nThay vÃ¬ dÃ¹ng chung 1 file config thÃ¬ bÃ¢y giá» mÃ¬nh sáº½ táº¡o ra 3 file:\nwebpack.common.js: Chá»©a cáº¥u hÃ¬nh chung cho cáº£ 2 mÃ´i trÆ°á»ng. webpack.dev.js: Chá»©a cáº¥u hÃ¬nh cho mÃ´i trÆ°á»ng development. webpack.prod.js: Chá»©a cáº¥u hÃ¬nh cho mÃ´i trÆ°á»ng production. File webpack.common.js giá»¯ nguyÃªn, file webpack.dev.js vÃ  webpack.prod.js thÃ¬ sá»­ dá»¥ng thÆ° viá»‡n webpack-merge Ä‘á»ƒ copy cáº¥u hÃ¬nh tá»« file common sang vÃ  bá»• sung thÃªm 1 sá»‘ cáº¥u hÃ¬nh riÃªng.\nVÃ­ dá»¥ file webpack.prod.js:\n1 2 3 4 5 6 const { merge } = require(\"webpack-merge\"); const common = require(\"./webpack.common.js\"); module.exports = merge(common, { mode: \"production\", }); File webpack.dev.js:\n1 2 3 4 5 6 7 8 9 10 11 12 13 const { merge } = require(\"webpack-merge\"); const common = require(\"./webpack.common.js\"); module.exports = merge(common, { mode: \"development\", devtool: \"inline-source-map\", devServer: { contentBase: \"./dist\", hot: true, }, }); Khi cháº¡y á»Ÿ mÃ´i trÆ°á»ng dev thÃ¬ dÃ¹ng lá»‡nh:\n1 npx webpackÂ serveÂ --openÂ --configÂ webpack.dev.js Khi cháº¡y á»Ÿ mÃ´i trÆ°á»ng production thÃ¬ dÃ¹ng lá»‡nh:\n1 npx webpackÂ --configÂ webpack.prod.js Äá»ƒ cho nhanh thÃ¬ chÃºng ta cÃ³ thá»ƒ dÃ¹ng npm scripts báº±ng cÃ¡ch sá»­a file package.json má»¥c scripts:\n1 2 3 4 \"scripts\":Â { \"start\":Â \"webpackÂ serveÂ --openÂ --configÂ webpack.dev.js\", \"build\":Â \"webpackÂ --configÂ webpack.prod.js\" }, Sau Ä‘Ã³ khi cáº§n dev thÃ¬ cháº¡y lá»‡nh: npm start hoáº·c yarn start, cÃ²n khi build production thÃ¬ cháº¡y lá»‡nh: npm run build hoáº·c yarn build.\nVáº­y lÃ  xong, chÃºng ta Ä‘Ã£ setup xong má»™t project static web sá»­ dá»¥ng Webpack Ä‘á»ƒ bundle vÃ  tá»‘i Æ°u cho production. CÃ¡c báº¡n cÃ³ thá»ƒ tá»± tÃ¬m hiá»ƒu thÃªm trÃªn trang chá»§ cá»§a webpack Ä‘á»ƒ cáº¥u hÃ¬nh chi tiáº¿t hÆ¡n cho tá»«ng project.\nTham kháº£o cáº¥u hÃ¬nh vÃ  cáº¥u trÃºc thÆ° má»¥c demo Ä‘áº§y Ä‘á»§ hÆ¡n táº¡i Ä‘Ã¢y: https://github.com/robinhuy/webpack-static-pages-template.\n","wordCount":"2045","inLanguage":"en","datePublished":"2021-06-19T00:00:00Z","dateModified":"2021-06-19T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://huydq.dev/blog/toi-uu-static-page-voi-webpack/"},"publisher":{"@type":"Organization","name":"HuyDQ's Blog","logo":{"@type":"ImageObject","url":"https://huydq.dev/icons/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://huydq.dev/ accesskey=h title="huydq.dev (Alt + H)">huydq.dev</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://huydq.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://huydq.dev/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://huydq.dev/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://huydq.dev/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Tá»‘i Æ°u static website vá»›i Webpack</h1><div class=post-meta><span title='2021-06-19 00:00:00 +0000 UTC'>19/06/2021</span>&nbsp;Â·&nbsp;10 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#1-khá»Ÿi-táº¡o-project>1. Khá»Ÿi táº¡o project</a></li><li><a href=#2-bundle-code>2. Bundle Code</a></li><li><a href=#3-sá»­-dá»¥ng-file-cáº¥u-hÃ¬nh>3. Sá»­ dá»¥ng file cáº¥u hÃ¬nh</a></li><li><a href=#4-sá»­-dá»¥ng-plugin>4. Sá»­ dá»¥ng Plugin</a></li><li><a href=#5-cache-busting>5. Cache Busting</a></li><li><a href=#6-multiple-pages>6. Multiple pages</a></li><li><a href=#7-cáº¥u-hÃ¬nh-theo-mÃ´i-trÆ°á»ng>7. Cáº¥u hÃ¬nh theo mÃ´i trÆ°á»ng</a></li></ul></nav></div></details></div><div class=post-content><p>Náº¿u báº¡n lÃ  má»™t Web Frontend Developer thÃ¬ cháº¯c sáº½ khÃ´ng xa láº¡ gÃ¬ vá»›i <a href=https://webpack.js.org/>Webpack</a>, má»™t cÃ´ng cá»¥ bundle code máº¡nh máº½. Webpack thÆ°á»ng Ä‘Æ°á»£c tÃ­ch há»£p sáºµn trong cÃ¡c thÆ° viá»‡n nhÆ° React, Angular, Vue, â€¦ vÃ  cÃ³ nhiá»u ngÆ°á»i tháº­m chÃ­ cÃ²n khÃ´ng biáº¿t Ä‘áº¿n sá»± tá»“n táº¡i cÅ©ng nhÆ° tÃ¡c dá»¥ng cá»§a nÃ³ ğŸ˜…</p><p>BÃ i viáº¿t nÃ y mÃ¬nh sáº½ hÆ°á»›ng dáº«n cÃ¡c báº¡n cÃ¡ch tá»‘i Æ°u má»™t static website (web tÄ©nh chá»‰ gá»“m HTML CSS JS) báº±ng Webpack. ChÃº Ã½ static web nÃ y thuá»™c dáº¡ng multiple pages chá»© khÃ´ng pháº£i single page, vÃ  cÃ³ thá»ƒ Ã¡p dá»¥ng cho cÃ¡c website Ä‘á»™ng cÃ³ kiáº¿n trÃºc dáº¡ng Monolithic (dÃ¹ng view template engine Ä‘á»ƒ render).</p><p>VÃ­ dá»¥ cáº¥u trÃºc thÆ° má»¥c má»™t static website thÆ°á»ng cÃ³ dáº¡ng nhÆ° sau:</p><p><img loading=lazy src=/images/static-web-structure.png alt="Cáº¥u trÃºc thÆ° má»¥c static website"></p><p>Sau khi cáº¯t HTML CSS tá»« báº£n thiáº¿t káº¿ xong, trÆ°á»›c khi Ä‘áº©y code lÃªn production, chÃºng ta cáº§n thÃªm má»™t bÆ°á»›c tá»‘i Æ°u nhÆ°: Minify (obfuscate) code, nÃ©n áº£nh, Ä‘Ã¡nh version file CSS, JS Ä‘á»ƒ revalidate cache, â€¦</p><p>ChÃºng ta cÃ³ thá»ƒ dÃ¹ng cÃ¡c tool nhÆ° <a href=https://gruntjs.com/>Grunt</a>, <a href=https://gulpjs.com/>Gulp</a>, â€¦ CÃ²n trong bÃ i nÃ y mÃ¬nh sáº½ dÃ¹ng Webpack vá»›i nhá»¯ng tÃ­nh nÄƒng Æ°u viá»‡t hÆ¡n, giÃºp láº­p trÃ¬nh viÃªn cÃ³ thá»ƒ <em>lÆ°á»i hÆ¡n</em>.</p><p>Code tham kháº£o sau khi cáº¥u hÃ¬nh xong cÃ¡c báº¡n cÃ³ thá»ƒ xem luÃ´n táº¡i Ä‘Ã¢y (xem xong nhá»› Star Ä‘á»ƒ á»§ng há»™ tÃ¡c giáº£): <a href=https://github.com/robinhuy/webpack-static-pages-template>https://github.com/robinhuy/webpack-static-pages-template.</a></p><p>Giá» chÃºng ta sáº½ thá»­ cáº¥u hÃ¬nh tá»« Ä‘áº§u Ä‘á»ƒ hiá»ƒu Ä‘Æ°á»£c cÆ¡ báº£n cÃ¡ch Webpack hoáº¡t Ä‘á»™ng vÃ  cÃ³ thá»ƒ tÃ¹y biáº¿n theo tá»«ng trÆ°á»ng há»£p cá»¥ thá»ƒ.</p><h2 id=1-khá»Ÿi-táº¡o-project>1. Khá»Ÿi táº¡o project<a hidden class=anchor aria-hidden=true href=#1-khá»Ÿi-táº¡o-project>#</a></h2><p>Khá»Ÿi táº¡o project vá»›i lá»‡nh <strong>npm init</strong> vÃ  nháº­p vÃ o cÃ¡c thÃ´ng sá»‘ nhÆ°: TÃªn project, author, â€¦</p><p>CÃ i <strong>webpack</strong> vÃ  <strong>webpack-cli</strong> vá»›i mÃ´i trÆ°á»ng dev:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install webpack webpack-cli --save-dev
</span></span></code></pre></td></tr></table></div></div><p>hoáº·c dÃ¹ng <a href=https://yarnpkg.com/>yarn</a>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn add webpack webpack-cli --dev
</span></span></code></pre></td></tr></table></div></div><p>Sau khi cÃ i xong chÃºng ta sáº½ tháº¥y cÃ³ file <strong>package.json</strong> chá»©a cÃ¡c thÃ´ng tin vá» project vá»«a táº¡o.</p><p>Sá»­a láº¡i file <strong>package.json</strong>, bá» pháº§n <strong>main</strong> Ä‘i vÃ  thÃªm option <strong>private</strong> vá»›i giÃ¡ trá»‹ lÃ  <strong>true</strong>. CÃ¡i nÃ y Ä‘á»ƒ trÃ¡nh lá»—i vá» sau khi build production.</p><p><img loading=lazy src=/images/package-json.png alt="Sá»­a file package.json"></p><h2 id=2-bundle-code>2. Bundle Code<a hidden class=anchor aria-hidden=true href=#2-bundle-code>#</a></h2><p>Thá»­ nghiá»‡m chá»©c nÄƒng Ä‘áº§u tiÃªn cá»§a Webpack Ä‘Ã³ lÃ  Bundle code, cho phÃ©p chÃºng ta gá»™p cÃ¡c file js láº¡i thÃ nh 1 file (bundle) vÃ  inject vÃ o trong má»™t file HTML.</p><p>Äáº§u tiÃªn táº¡o thÆ° má»¥c <strong>src</strong> Ä‘á»ƒ chá»©a source code, trong thÆ° má»¥c src táº¡o 1 file lÃ  <strong>index.js</strong> vá»›i ná»™i dung tÃ¹y Ã½. VÃ­ dá»¥ mÃ¬nh táº¡o file <strong>index.js</strong> chá»‰ vá»›i 1 dÃ²ng <em>console.log(&lsquo;index.js&rsquo;):</em></p><p><img loading=lazy src=/images/webpack-demo-1.png alt="File index.js"></p><p>Rá»“i giá» cháº¡y lá»‡nh sau Ä‘á»ƒ bundle code (sá»­ dá»¥ng webpack cÃ i trong project):</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npx webpack
</span></span></code></pre></td></tr></table></div></div><p>Sau khi cháº¡y xong lá»‡nh trÃªn thÃ nh cÃ´ng, sáº½ cÃ³ 1 thÆ° má»¥c tá»± Ä‘á»™ng táº¡o ra lÃ  <strong>dist</strong> vÃ  bÃªn trong cÃ³ 1 file lÃ  <strong>main.js</strong>. Xem thá»­ ná»™i dung thÃ¬ tháº¥y giá»‘ng há»‡t file index.js mÃ  chÃºng ta vá»«a táº¡o.</p><p>NhÆ° váº­y lÃ  chÃºng ta vá»«a bundle file <code>index.js</code> thÃ nh <code>main.js</code>. NhÆ°ng file <code>index.js</code> Ä‘Æ¡n giáº£n quÃ¡ chÆ°a tháº¥y cÃ³ gÃ¬. MÃ¬nh sáº½ sá»­a láº¡i cho nÃ³ phá»©c táº¡p hÆ¡n má»™t chÃºt báº±ng cÃ¡ch nhÃºng jQuery vÃ o Ä‘á»ƒ sá»­a DOM. Vá»›i cÃ¡c static website thÃ¬ mÃ¬nh tháº¥y dÃ¹ng jQuery váº«n á»•n, khÃ´ng cáº§n thiáº¿t pháº£i cháº¡y theo cÃ¡c trending framework lÃ m gÃ¬.</p><p><img loading=lazy src=/images/jquery.jpg alt=jQuery></p><p>Äá»ƒ sá»­ dá»¥ng jQuery chÃºng ta cÃ³ thá»ƒ chÃ¨n link CDN hoáº·c vÃ o trang chá»§ Ä‘á»ƒ down file js vá» rá»“i nhÃºng vÃ o file HTML. Tuy nhiÃªn khi dÃ¹ng webpack chÃºng ta cÃ³ thá»ƒ cÃ i jQuery qua npm vÃ  import vÃ o file js khÃ¡c Ä‘á»ƒ sá»­ dá»¥ng.</p><p>CÃ i jQuery:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install jquery
</span></span></code></pre></td></tr></table></div></div><p>hoáº·c</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn add jquery
</span></span></code></pre></td></tr></table></div></div><p>Sau khi cÃ i xong, jQuery sáº½ Ä‘Æ°á»£c táº£i vÃ o trong thÆ° má»¥c <strong>node_modules</strong> vÃ  Ä‘Æ°á»£c khai bÃ¡o trong má»¥c <em>dependencies</em> cá»§a file <strong>package.json</strong>.</p><p>Sá»­a láº¡i file <strong>index.js</strong> nhÆ° sau:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>$</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;jquery&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#34;body&#34;</span>).<span style=color:#a6e22e>html</span>(<span style=color:#e6db74>&#34;&lt;h1&gt;Hello Webpack&lt;/h2&gt;&#34;</span>);
</span></span></code></pre></td></tr></table></div></div><p>Giá» Ä‘á»ƒ cho dá»… test, cÃ¡c báº¡n táº¡o thÃªm cho mÃ¬nh 1 file <strong>index.html</strong> á»Ÿ trong thÆ° má»¥c <strong>dist</strong>, sau Ä‘Ã³ nhÃºng file <strong>main.js</strong> vÃ o trong file <strong>index.html</strong></p><p><img loading=lazy src=/images/webpack-demo-2.png alt="File main.js"></p><p>Rá»“i cháº¡y láº¡i lá»‡nh build: <strong>npx webpack.</strong></p><p>Sau khi build thÃ nh cÃ´ng thÃ¬ báº­t file HTML lÃªn cÃ¡c báº¡n sáº½ tháº¥y nÃ³ hiá»ƒn thá»‹ ra mÃ n hÃ¬nh dÃ²ng chá»¯ â€œHello Webpackâ€. NhÆ° váº­y lÃ  chÃºng ta Ä‘Ã£ bundle <strong>jQuery</strong> + <strong>index.js</strong> thÃ nh file <strong>main.js</strong> vÃ  nhÃºng vÃ o file <strong>index.html</strong>. VÃ  náº¿u báº¡n báº­t file <strong>main.js</strong> lÃªn xem thÃ¬ sáº½ tháº¥y lÃ  nÃ³ Ä‘Ã£ Ä‘Æ°á»£c minify + obfuscated.</p><p>CÃ¡c báº¡n cÃ³ thá»ƒ thá»­ viáº¿t thÃªm function, import code tá»« nhiá»u file khÃ¡c nhau vÃ  bundle láº¡i thÃ nh má»™t file nhÆ° trÃªn.</p><h2 id=3-sá»­-dá»¥ng-file-cáº¥u-hÃ¬nh>3. Sá»­ dá»¥ng file cáº¥u hÃ¬nh<a hidden class=anchor aria-hidden=true href=#3-sá»­-dá»¥ng-file-cáº¥u-hÃ¬nh>#</a></h2><p>á» vÃ­ dá»¥ trÃªn chÃºng ta cháº¡y webpack vá»›i cáº¥u hÃ¬nh máº·c Ä‘á»‹nh. Äá»ƒ cÃ³ thá»ƒ cáº¥u hÃ¬nh Ä‘Æ°á»£c nhiá»u hÆ¡n, tÃ¹y chá»‰nh dá»… hÆ¡n thÃ¬ chÃºng ta táº¡o thÃªm 1 file cáº¥u hÃ¬nh vÃ  cháº¡y webpack theo cáº¥u hÃ¬nh cá»§a file Ä‘Ã³.</p><p>á» thÆ° má»¥c gá»‘c táº¡o 1 file lÃ  <strong>webpack.config.js</strong> vá»›i ná»™i dung nhÆ° sau:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;path&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/index.js&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;main.js&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#34;dist&#34;</span>),
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><p>ÄÃ¢y chÃ­nh lÃ  cáº¥u hÃ¬nh máº·c Ä‘á»‹nh, cháº¡y thá»­ vá»›i lá»‡nh:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npx webpack --config webpack.config.js
</span></span></code></pre></td></tr></table></div></div><p>báº¡n sáº½ tháº¥y káº¿t quáº£ y há»‡t nhÆ° cÅ©.</p><p>BÃ¢y giá» thá»­ sá»­a file config, vÃ­ dá»¥ sá»­a pháº§n <em>output</em> > <em>filename</em> thÃ nh <strong>bundle.js</strong>,xÃ³a háº¿t file <em>.js</em> trong thÆ° má»¥c <strong>dist</strong> Ä‘i vÃ  build láº¡i, báº¡n sáº½ tháº¥y sau khi build thÃ¬ file bundle cá»§a chÃºng ta Ä‘Ã£ Ä‘á»•i thÃ nh <strong>bundle.js</strong> nhÆ° trong file cáº¥u hÃ¬nh.</p><p>File cáº¥u hÃ¬nh cá»§a webpack chá»‰ Ä‘Æ¡n giáº£n lÃ  export ra má»™t object cÃ³ chá»©a cÃ¡c options mÃ  webpack cung cáº¥p vÃ  giÃ¡ trá»‹ do chÃºng ta thiáº¿t láº­p, options nÃ o khÃ´ng khai bÃ¡o thÃ¬ webpack sáº½ sá»­ dá»¥ng giÃ¡ trá»‹ máº·c Ä‘á»‹nh. VÃ­ dá»¥ má»™t file cáº¥u hÃ¬nh:</p><p><img loading=lazy src=/images/webpack-demo-3.png alt="Webpack configuration file"></p><h2 id=4-sá»­-dá»¥ng-plugin>4. Sá»­ dá»¥ng Plugin<a hidden class=anchor aria-hidden=true href=#4-sá»­-dá»¥ng-plugin>#</a></h2><p>Sá»­ dá»¥ng plugin Ä‘á»ƒ bá»• sung thÃªm tÃ­nh nÄƒng mong muá»‘n, cÃ³ thá»ƒ dÃ¹ng nhá»¯ng plugin cÃ³ sáºµn hoáº·c tá»± viáº¿t. VÃ­ dá»¥ má»™t sá»‘ Plugin hay dÃ¹ng: <a href=https://webpack.js.org/plugins/html-webpack-plugin/>HtmlWebpackPlugin</a>, <a href=https://webpack.js.org/plugins/mini-css-extract-plugin/>MiniCssExtractPlugin</a>, <a href=https://webpack.js.org/plugins/image-minimizer-webpack-plugin/>ImageMinimizerWebpackPlugin</a>, <a href=https://webpack.js.org/plugins/provide-plugin/>ProvidePlugin</a>.</p><p>Vá»›i nhá»¯ng plugin cÃ³ sáºµn trÃªn npm thÃ¬ Ä‘áº§u tiÃªn chÃºng ta cáº§n cÃ i thÆ° viá»‡n trÆ°á»›c:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install html-webpack-plugin --save-dev
</span></span></code></pre></td></tr></table></div></div><p>hoáº·c</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn add html-webpack-plugin --dev
</span></span></code></pre></td></tr></table></div></div><p>Sau khi cÃ i xong thÃ¬ khai bÃ¡o plugin sá»­ dá»¥ng á»Ÿ file config vá»›i options <strong>plugins</strong>, giÃ¡ trá»‹ cá»§a nÃ³ lÃ  1 máº£ng cÃ¡c plugin. VÃ­ dá»¥ cÃ i plugin <a href=https://github.com/jantimon/html-webpack-plugin>html-webpack-plugin</a> Ä‘á»ƒ cho phÃ©p táº¡o file html máº«u vÃ  tÃ¹y chá»‰nh inject script theo cÃ¡ch mÃ¬nh muá»‘n.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;html-webpack-plugin&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;index.js&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>__dirname</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/dist`</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>clean</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span>()],
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><p>BÃ¢y giá» thay vÃ¬ táº¡o sáºµn file html á»Ÿ trong thÆ° má»¥c <strong>dist</strong>, thÃ¬ chÃºng ta chá»‰ cáº§n cháº¡y lá»‡nh build, webpack sáº½ tá»± táº¡o ra 1 file html vÃ  nhÃºng file bundle vÃ o luÃ´n. ChÃº Ã½ option output <strong>clean: true</strong> lÃ  Ä‘á»ƒ tá»± Ä‘á»™ng xÃ³a háº¿t cÃ¡c file cÅ© trong thÆ° má»¥c dist trÆ°á»›c khi build.</p><h2 id=5-cache-busting>5. Cache Busting<a hidden class=anchor aria-hidden=true href=#5-cache-busting>#</a></h2><p>ThÃ´ng thÆ°á»ng trÃ¬nh duyá»‡t sáº½ tá»± Ä‘á»™ng cache cÃ¡c file tÄ©nh nhÆ° CSS, JS Ä‘á»ƒ tÄƒng performance (trá»« trÆ°á»ng há»£p phÃ­a server cáº¥u hÃ¬nh khÃ´ng cho phÃ©p cache file). Thá»‰nh thoáº£ng báº¡n sáº½ gáº·p trÆ°á»ng há»£p sá»­a file CSS nhÆ°ng ngÆ°á»i dÃ¹ng khÃ´ng tháº¥y cÃ³ gÃ¬ thay Ä‘á»•i. Muá»‘n Ã¡p dá»¥ng style má»›i thÃ¬ pháº£i tá»± clear cache trÃªn trÃ¬nh duyá»‡t (Ã­t ngÆ°á»i dÃ¹ng biáº¿t vÃ  tá»± lÃ m viá»‡c nÃ y).</p><p>Váº­y Ä‘á»ƒ tá»‘i Æ°u performance, váº«n cho phÃ©p cache file vá»›i thá»i gian dÃ i, thÃ¬ chÃºng ta Ã¡p dá»¥ng cache busting. CÃ³ thá»ƒ lÃ  dÃ¹ng query strings hoáº·c Ä‘á»•i tÃªn file Ä‘á»ƒ browser nháº­n biáº¿t lÃ  cÃ³ thay Ä‘á»•i vÃ  táº£i file má»›i vá». Äá»ƒ Ä‘áº£m báº£o chÃ­nh xÃ¡c thÃ¬ mÃ¬nh chá»n cÃ¡ch Ä‘á»•i tÃªn file, má»—i láº§n thay Ä‘á»•i code thÃ¬ chÃºng ta láº¡i Ä‘á»•i tÃªn file Ä‘i Ä‘á»ƒ trÃ¬nh duyá»‡t tá»± táº£i láº¡i.</p><p>Thay vÃ¬ lÃ m thá»§ cÃ´ng thÃ¬ chÃºng ta sáº½ cáº¥u hÃ¬nh trong webpack Ä‘á»ƒ webpack tá»± Ä‘á»™ng build file vá»›i tÃªn má»›i vÃ  tá»± Ä‘á»™ng nhÃºng vÃ o file html. Káº¿t há»£p option <strong>entry</strong> + <strong>module</strong> vÃ  plugin <strong>HtmlWebpackPlugin</strong> + <strong>MiniCssExtractPlugin</strong>, chÃºng ta cÃ³ thá»ƒ bundle ra cÃ¡c file JS, CSS vá»›i tÃªn theo dáº¡ng <strong>hash</strong> hoáº·c <strong>contenthash</strong> rá»“i tá»± Ä‘á»™ng nhÃºng vÃ o file html.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;html-webpack-plugin&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>MiniCssExtractPlugin</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;mini-css-extract-plugin&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>index</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>import</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/index.js&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;index.[contenthash].js&#34;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>__dirname</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/dist`</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>clean</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span>(),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MiniCssExtractPlugin</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;[name].[contenthash].css&#34;</span>,
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>module</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rules</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/.s?css$/</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>use</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>MiniCssExtractPlugin</span>.<span style=color:#a6e22e>loader</span>, <span style=color:#e6db74>&#34;css-loader&#34;</span>],
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><p>ChÃº Ã½ á»Ÿ trÃªn mÃ¬nh cÃ³ sá»­ dá»¥ng thÃªm thÆ° viá»‡n <a href=https://webpack.js.org/loaders/css-loader/>css-loader</a> Ä‘á»ƒ cho phÃ©p import file CSS.</p><p>Test thá»­ báº±ng cÃ¡ch táº¡o thÃªm 1 file css trong thÆ° má»¥c <strong>src</strong>, vÃ­ dá»¥ <strong>style.css</strong>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#f92672>h1</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>color</span>: <span style=color:#66d9ef>red</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Tiáº¿p Ä‘Ã³ import vÃ o file <strong>index.js</strong>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;./style.css&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>$</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;jquery&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#34;body&#34;</span>).<span style=color:#a6e22e>prepend</span>(<span style=color:#e6db74>&#34;&lt;h1&gt;Hello Webpack&lt;/h2&gt;&#34;</span>);
</span></span></code></pre></td></tr></table></div></div><p>Cháº¡y láº¡i lá»‡nh build vÃ  káº¿t quáº£ sáº½ nhÆ° nÃ y:</p><p><img loading=lazy src=/images/webpack-demo-4.png alt="CSS JS Cache Busting"></p><h2 id=6-multiple-pages>6. Multiple pages<a hidden class=anchor aria-hidden=true href=#6-multiple-pages>#</a></h2><p>TÆ°Æ¡ng tá»±, thÃªm 1 chÃºt cáº¥u hÃ¬nh á»Ÿ <strong>entry</strong> vÃ  <strong>HtmlWebpackPlugin</strong>, chÃºng ta sáº½ cÃ³ thá»ƒ code nhiá»u file HTML (multiple pages), vÃ  cho phÃ©p inject cÃ¡c script khÃ¡c nhau vÃ o tá»«ng file. VÃ­ dá»¥:</p><p>Cáº¥u hÃ¬nh multiple entry cho 2 trang lÃ  <strong>index</strong> vÃ  <strong>about</strong>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>index</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>import</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/js/index.js&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;js/index.[contenthash].js&#34;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>about</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>import</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/js/about.js&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;js/about.[contenthash].js&#34;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>},
</span></span></code></pre></td></tr></table></div></div><p>Cáº¥u hÃ¬nh plugin HtmlWebpackPlugin Ä‘á»ƒ cho phÃ©p sá»­ dá»¥ng file html sáºµn lÃ m template thay vÃ¬ tá»± sinh ra file html:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/index.html&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>inject</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;body&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;index.html&#34;</span>,
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/about.html&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>inject</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;body&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;about.html&#34;</span>,
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MiniCssExtractPlugin</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;css/[name].[contenthash].css&#34;</span>,
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>],
</span></span></code></pre></td></tr></table></div></div><p>Tá»± build láº¡i Ä‘á»ƒ xem káº¿t quáº£!</p><h2 id=7-cáº¥u-hÃ¬nh-theo-mÃ´i-trÆ°á»ng>7. Cáº¥u hÃ¬nh theo mÃ´i trÆ°á»ng<a hidden class=anchor aria-hidden=true href=#7-cáº¥u-hÃ¬nh-theo-mÃ´i-trÆ°á»ng>#</a></h2><p>á» trÃªn chÃºng ta Ä‘Ã£ cáº¥u hÃ¬nh Ä‘Æ°á»£c tÆ°Æ¡ng Ä‘á»‘i Ä‘áº§y Ä‘á»§ cÃ¡c chá»©c nÄƒng. NhÆ°ng náº¿u má»—i láº§n code láº¡i pháº£i build láº¡i code Ä‘á»ƒ xem káº¿t quáº£ thÃ¬ ráº¥t máº¥t cÃ´ng, vÃ  khi debug cÅ©ng khÃ³ vÃ¬ code Ä‘Ã£ Ä‘Æ°á»£c minify + obfuscate. VÃ¬ váº­y chÃºng ta sáº½ bá»• sung thÃªm cáº¥u hÃ¬nh cho mÃ´i trÆ°á»ng dev, vÃ  bá»• sung lá»‡nh cháº¡y cho 2 mÃ´i trÆ°á»ng riÃªng biá»‡t.</p><p>Thay vÃ¬ dÃ¹ng chung 1 file config thÃ¬ bÃ¢y giá» mÃ¬nh sáº½ táº¡o ra 3 file:</p><ul><li><strong>webpack.common.js</strong>: Chá»©a cáº¥u hÃ¬nh chung cho cáº£ 2 mÃ´i trÆ°á»ng.</li><li><strong>webpack.dev.js</strong>: Chá»©a cáº¥u hÃ¬nh cho mÃ´i trÆ°á»ng development.</li><li><strong>webpack.prod.js</strong>: Chá»©a cáº¥u hÃ¬nh cho mÃ´i trÆ°á»ng production.</li></ul><p>File <strong>webpack.common.js</strong> giá»¯ nguyÃªn, file <strong>webpack.dev.js</strong> vÃ  <strong>webpack.prod.js</strong> thÃ¬ sá»­ dá»¥ng thÆ° viá»‡n <a href=https://www.npmjs.com/package/webpack-merge>webpack-merge</a> Ä‘á»ƒ copy cáº¥u hÃ¬nh tá»« file common sang vÃ  bá»• sung thÃªm 1 sá»‘ cáº¥u hÃ¬nh riÃªng.</p><p>VÃ­ dá»¥ file <strong>webpack.prod.js</strong>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>merge</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;webpack-merge&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>common</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;./webpack.common.js&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>merge</span>(<span style=color:#a6e22e>common</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;production&#34;</span>,
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><p>File <strong>webpack.dev.js</strong>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>merge</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;webpack-merge&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>common</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;./webpack.common.js&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>merge</span>(<span style=color:#a6e22e>common</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;development&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>devtool</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;inline-source-map&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>devServer</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>contentBase</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./dist&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>hot</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><p>Khi cháº¡y á»Ÿ mÃ´i trÆ°á»ng dev thÃ¬ dÃ¹ng lá»‡nh:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npx webpackÂ serveÂ --openÂ --configÂ webpack.dev.js
</span></span></code></pre></td></tr></table></div></div><p>Khi cháº¡y á»Ÿ mÃ´i trÆ°á»ng production thÃ¬ dÃ¹ng lá»‡nh:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npx webpackÂ --configÂ webpack.prod.js
</span></span></code></pre></td></tr></table></div></div><p>Äá»ƒ cho nhanh thÃ¬ chÃºng ta cÃ³ thá»ƒ dÃ¹ng npm scripts báº±ng cÃ¡ch sá»­a file <strong>package.json</strong> má»¥c <em>scripts</em>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#f92672>:</span>Â {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;start&#34;</span><span style=color:#f92672>:</span>Â <span style=color:#e6db74>&#34;webpackÂ serveÂ --openÂ --configÂ webpack.dev.js&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;build&#34;</span><span style=color:#f92672>:</span>Â <span style=color:#e6db74>&#34;webpackÂ --configÂ webpack.prod.js&#34;</span>
</span></span><span style=display:flex><span>},
</span></span></code></pre></td></tr></table></div></div><p>Sau Ä‘Ã³ khi cáº§n dev thÃ¬ cháº¡y lá»‡nh: <strong>npm start</strong> hoáº·c <strong>yarn start</strong>, cÃ²n khi build production thÃ¬ cháº¡y lá»‡nh: <strong>npm run build</strong> hoáº·c <strong>yarn build</strong>.</p><p>Váº­y lÃ  xong, chÃºng ta Ä‘Ã£ setup xong má»™t project static web sá»­ dá»¥ng Webpack Ä‘á»ƒ bundle vÃ  tá»‘i Æ°u cho production. CÃ¡c báº¡n cÃ³ thá»ƒ tá»± tÃ¬m hiá»ƒu thÃªm trÃªn trang chá»§ cá»§a webpack Ä‘á»ƒ cáº¥u hÃ¬nh chi tiáº¿t hÆ¡n cho tá»«ng project.</p><p>Tham kháº£o cáº¥u hÃ¬nh vÃ  cáº¥u trÃºc thÆ° má»¥c demo Ä‘áº§y Ä‘á»§ hÆ¡n táº¡i Ä‘Ã¢y: <a href=https://github.com/robinhuy/webpack-static-pages-template>https://github.com/robinhuy/webpack-static-pages-template</a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://huydq.dev/tags/webpack/>Webpack</a></li></ul><nav class=paginav><a class=prev href=https://huydq.dev/blog/tai-su-dung-code-cho-nhieu-project-voi-git-submodules/><span class=title>Â« Prev</span><br><span>TÃ¡i sá»­ dá»¥ng code cho nhiá»u project vá»›i Git Submodules</span></a>
<a class=next href=https://huydq.dev/blog/cach-tao-web-tinh-voi-github/><span class=title>Next Â»</span><br><span>CÃ¡c cÃ¡ch táº¡o web tÄ©nh vá»›i Github</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Tá»‘i Æ°u static website vá»›i Webpack on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fhuydq.dev%2fblog%2ftoi-uu-static-page-voi-webpack%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Tá»‘i Æ°u static website vá»›i Webpack on twitter" href="https://twitter.com/intent/tweet/?text=T%e1%bb%91i%20%c6%b0u%20static%20website%20v%e1%bb%9bi%20Webpack&url=https%3a%2f%2fhuydq.dev%2fblog%2ftoi-uu-static-page-voi-webpack%2f&hashtags=Webpack"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a></div></footer><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//huydq-dev.disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer class=footer><span>&copy; 2022 HuyDQ's Blog</span>
<span>&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;</span><div class=social-icons><a href=https://github.com/robinhuy><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://codepen.io/robinhuy><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"/><line x1="12" y1="22" x2="12" y2="15.5"/><polyline points="22 8.5 12 15.5 2 8.5"/><polyline points="2 15.5 12 8.5 22 15.5"/><line x1="12" y1="2" x2="12" y2="8.5"/></svg></a><a href=https://stackoverflow.com/users/5229299/robin-huy><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2.913 16.041v6.848h17.599v-6.848M7.16 18.696h8.925M7.65 13.937l8.675 1.8M9.214 9.124l8.058 3.758M12.086 4.65l6.849 5.66M15.774 1.111l5.313 7.162"/></svg></a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>